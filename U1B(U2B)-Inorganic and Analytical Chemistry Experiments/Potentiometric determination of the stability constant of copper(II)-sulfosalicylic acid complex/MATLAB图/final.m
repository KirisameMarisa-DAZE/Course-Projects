clear;
clc;

x=zeros(51);
%无Cu滴定曲线
v1=[0.00 	2.00 	4.00 	6.00 	7.00 	8.00 	8.50 	8.54 	8.60 	8.65 	8.68 	8.74 	8.80 	8.85 	8.90 	8.93 	9.00 	9.51 	9.99 	11.00 	12.00 ];
pH1=[1.95 	2.12 	2.35 	2.70 	2.97 	3.46 	4.44 	4.94 	5.99 	7.10 	8.87 	9.64 	9.84 	10.01 	10.13 	10.23 	10.34 	10.85 	11.06 	11.34 	11.51 ];
values1 = spcrv([[v1(1) v1 v1(end)];[pH1(1) pH1 pH1(end)]],3);%为画平滑曲线进行插值（增加数据间推算的点）
s=1;
for i=1.95:0.2:12%取pH
    x(2,s)=i;%第二行为取的pH值
    k=find(abs(values1(2,:)-i)<0.1);
    if size(k)>0
        x(1,s)=k(1);%第一行为pH较为接近的编号
        x(4,s)=values1(2,x(1,s));%第四行为较为接近的pH
        x(3,s)=values1(1,x(1,s));%第三行为对应的V
    else
        x(1,s)=0;
    end
    s=s+1;
end

%有Cu滴定曲线
v2=[0.00 	2.00 	4.00 	6.00 	7.00 	8.00 	8.50 	8.88 	8.97 	9.30 	9.50 	9.55 	9.60 	9.65 	9.75 	9.90 	10.11 	10.35 	10.50 	10.54 	10.60 	10.63 	10.68 	10.70 	10.75 	10.81 	10.85 	11.00 	11.24 	11.50 	12.00 	13.00 ];
pH2=[1.95 	2.12 	2.35 	2.68 	2.93 	3.34 	3.71 	4.18 	4.31 	4.85 	5.52 	5.89 	6.09 	6.27 	6.64 	6.94 	7.30 	7.92 	8.65 	9.00 	9.39 	9.64 	9.83 	9.98 	10.13 	10.26 	10.36 	10.55 	10.80 	10.95 	11.16 	11.42 ];
values2 = spcrv([[v2(1) v2 v2(end)];[pH2(1) pH2 pH2(end)]],3);
s=1;
for i=1.95:0.2:12%取pH
    x(7,s)=i;%第二行为取的pH值
    k=find(abs(values2(2,:)-i)<0.1);
    if size(k)>0
        x(6,s)=k(1);%第一行为pH较为接近的编号
        x(9,s)=values2(2,x(6,s));%第四行为较为接近的pH
        x(8,s)=values2(1,x(6,s));%第三行为对应的V
    else
        x(1,s)=0;
    end    
    s=s+1;
end

%经一系列Excel分析数据后

%作最终的 n - (-lg[L^{3-}]) 图
hold on
x=[11.85889	11.61939	11.36301	11.07756	10.83780	10.65396	10.45876	10.27040	10.08312	9.89113	9.72556	9.57635	9.39820	9.21952	9.03743	8.86741	8.67528	8.48839	8.30624	8.13068	7.96960	7.80331	7.69112	7.57929	7.50914	7.51244	7.46853	7.90298	8.20850	7.35085	6.94491	6.64113	6.37208	6.10540	5.81713	5.60237	5.39425	5.21995	5.08594	4.86476	4.83224	4.79888	5.52500	4.45998	4.59453];
y=[0.13523 	0.30426 	0.33807 	0.20284 	0.17748 	0.32116 	0.38911 	0.45842 	0.51690 	0.55240 	0.65754 	0.79310 	0.84753 	0.89723 	0.93678 	0.99865 	1.01437 	1.03955 	1.07268 	1.11579 	1.17985 	1.23090 	1.34719 	1.44286 	1.55307 	1.67173 	1.73191 	1.83908 	1.88167 	1.91768 	1.94574 	1.96585 	1.98225 	2.00084 	2.03042 	2.03651 	2.04056 	2.03228 	2.01149 	2.02163 	1.97701 	1.94709 	1.88117 	1.95030 	1.82910 ];
scatter(x,y,500,'x','LineWidth',3);%数据散点图
values = spcrv([[x(1) x x(end)];[y(1) y y(end)]],3);%为画平滑曲线进行插值（增加数据间推算的点）
plot(values(1,:),values(2,:),'-.','LineWidth',3);%画平滑曲线
title('n - (-lg[L^{3-}]) 图','FontSize',25);
xlabel('-lg[L^{3-}]','FontSize',25);
ylabel('n','FontSize',25);
yline(1.5);%水平线
yline(0.5);%水平线
legend('数据点','拟合曲线','n=1.5','n=0.5','FontSize',25)
hold off